<!doctype html>
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>RHQ Metrics Console </title>
    <meta name="description" content="RHQ Metrics Console">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="shortcut icon" href="../dist/img/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="bower_components/patternfly/dist/img/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="bower_components/patternfly/dist/img/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="bower_components/patternfly/dist/img/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="bower_components/patternfly/dist/img/apple-touch-icon-57-precomposed.png">
    <!-- build:css styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="bower_components/toastr/toastr.css" />
    <link rel="stylesheet" href="bower_components/patternfly/dist/css/patternfly.css" />
    <link rel="stylesheet" href="bower_components/angular-busy/dist/angular-busy.css" />
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css({.tmp,app}) styles/main.css -->
    <link rel="stylesheet" href="css/font-awesome.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/d3-chart.css">
    <!-- endbuild -->

</head>
<body data-ng-cloak="true" class="container-fluid">
<div ng-include="'views/metrics.html'" ng-show="{{username != null}}"></div>
<div ng-include="'views/select-realm.html'" ng-show="{{username == null}}"></div>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56490830-1', 'auto');
    ga('send', 'pageview');

</script>

<!-- build:js scripts/vendor.js -->
<!-- bower:js -->
<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="bower_components/angular/angular.js"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
<script src="bower_components/moment/moment.js"></script>
<script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
<script src="bower_components/toastr/toastr.js"></script>
<script src="bower_components/lodash/dist/lodash.compat.js"></script>
<script src="bower_components/ngstorage/ngStorage.js"></script>
<script src="bower_components/patternfly/dist/js/patternfly.js"></script>
<script src="bower_components/jquery-ui/jquery-ui.js"></script>
<script src="bower_components/angular-ui-sortable/sortable.js"></script>
<script src="bower_components/angular-animate/angular-animate.js"></script>
<script src="bower_components/angular-busy/dist/angular-busy.js"></script>
<script src="bower_components/zeroclipboard/dist/ZeroClipboard.js"></script>
<script src="bower_components/ng-clip/dest/ng-clip.min.js"></script>
<script src="bower_components/d3/d3.js"></script>
<script src="bower_components/d3-tip/index.js"></script>
<script src="bower_components/numeral/numeral.js"></script>
<script src="bower_components/rhqm-charts/dist/rhqm-charts.js"></script>
<script src="bower_components/angularytics/dist/angularytics.min.js"></script>
<script src="bower_components/keycloak/dist/keycloak.js"></script>
<!-- endbower -->
<!-- endbuild -->

<!-- build:js({.tmp,app}) scripts/scripts.js -->
<script src="scripts/app.js"></script>
<script src="scripts/services/auth.js"></script>
<script src="scripts/services/authinterceptor.js"></script>
<script src="scripts/services/dashboard-state-service.js"></script>
<script src="scripts/services/metric-data-service.js"></script>
<script src="scripts/directives/date-time-range-selection-directive.js"></script>
<script src="scripts/controllers/dashboard-controller.js"></script>
<script src="scripts/controllers/sidebar-controller.js"></script>
<script src="scripts/controllers/config-controller.js"></script>
<script src="scripts/controllers/realm-selector-controller.js"></script>
<!-- endbuild -->
<script type="text/javascript">
angular.element(document).ready(function () {
    var realm = localStorage.realm;
    if (realm !== undefined) {
        console.debug("Bootstrapping the application and logging user into realm");
        // we know the realm already
        window.keycloak = Keycloak('/keycloak-'+realm+'.json');
        window.keycloak.init({ onLoad: 'login-required' })
            .success(function() {
                angular.bootstrap(document, ["chartingApp"]);
            })
            .error(function () {
                alert("Couldn't proceed with the login.");
                delete localStorage.realm;
                window.location.reload();
            });
    } else {
        // we don't know the realm, let the user choose one
        console.debug("Bootstrapping the application for realm selection");
        angular.bootstrap(document, ["chartingApp"]);
    }
});
</script>
</body>
</html>
